# 스프링 핵심 원리 - 고급편
## ThreadLocal
쓰레드 로컬은 해당 쓰레드만 접근할 수 있는 특별한 저장소를 말한다.
쓰레드A와 쓰레드B의 데이터를 각각 저장하고 쓰레드에 따라 저장한 데이터를 구별해준다.
쓰레드 로컬을 사용하면 동시성 문제를 해결할 수 있다.
```java
// ThreadLocal<T> 변수명 = new ThreadLocal<>();
ThreadLocal<String> userName = new ThreadLocal<>();

// 데이터 set
userName.set("홍길동");

// 데이터 get
userName.get();

// 쓰레드 로컬 제거
userName.remove();
```
쓰레드 로컬은 사용후 ``remove()``를 호출해서 제거해주어야 한다.
다 사용한 뒤에 제거를 해주지 않으면 메모리 누수가 발생 할 수 있다.
***
## TemplateMethod Pattern
> 작업에서 알고리즘의 골격을 정의하고 일부 단계를 하위 클래스로 연기합니다. 템플릿 메서드를 사용하면 하위 클래스가 알고리즘의 구조를 변경하지 않고도 알고리즘의 특정 단계를 재정의할 수 있습니다.
> -GoF-

부모 클래스에 알고리즘의 골격인 템플릿을 정의하고, 일부 변경되는 로직은 자식 클래스에 정의하는 것이다.
이렇게 하면 자식 클래스가 알고리즘의 전체 구조를 변경하지 않고, 특정 부분만 재정의할 수 있다. 상속과 오버라이딩을 통한
다형성으로 문제를 해결하는 것이다.

"하지만"

상속을 사용하기 때문에 상속의 단점을 그대로 안고간다. 자식 클래스가 부모 클래스와 컴파일 시점에 강하게 결합되는 문제가 있다.
자식 클래스의 입장에서는 부모 클래스의 기능을 사용하지 않지만 템플릿 메서드 패턴을 구현하기 위해 부모 클래스를 상속받는다.
부모 클래스에 새로운 메서드가 추가 되면 모든 자식 클래스들은 사용하지 않아도 새로 추가된 메서드를 오버라이딩 해야 한다.
***
